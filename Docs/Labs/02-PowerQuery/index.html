<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.22">
<meta name="author" content="Almacenes de datos - Grado en Ingeniería Informática - UAL">
<title>Transformación básica de datos con Power BI</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="book toc2 toc-right">
<div id="header">
<h1>Transformación básica de datos con Power BI</h1>
<div class="details">
<span id="author" class="author">Almacenes de datos - Grado en Ingeniería Informática - UAL</span><br>
<span id="revdate">Manuel Torres &lt;mtorres@ual.es&gt;</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Tabla de contenidos</div>
<ul class="sectlevel1">
<li><a href="#_resumen">Resumen</a></li>
<li><a href="#_introducción">1. Introducción</a></li>
<li><a href="#_caso_de_estudio_creación_de_un_cuadro_de_mandos_para_fake_store_api">2. Caso de estudio. Creación de un cuadro de mandos para Fake Store API</a>
<ul class="sectlevel2">
<li><a href="#_descripción_de_la_api">2.1. Descripción de la API</a></li>
</ul>
</li>
<li><a href="#_extracción_de_datos_y_transformación_con_power_query">3. Extracción de datos y transformación con Power Query</a>
<ul class="sectlevel2">
<li><a href="#_conexión_a_la_api_de_fake_store">3.1. Conexión a la API de Fake Store</a></li>
<li><a href="#_transformación_de_los_datos">3.2. Transformación de los datos</a></li>
</ul>
</li>
<li><a href="#_creación_del_modelo_de_datos">4. Creación del modelo de datos</a></li>
<li><a href="#_uso_de_dax_para_la_creación_de_medidas_y_columnas_calculadas">5. Uso de DAX para la creación de medidas y columnas calculadas</a>
<ul class="sectlevel2">
<li><a href="#_creación_de_medidas_calculadas_con_dax">5.1. Creación de medidas calculadas con DAX</a></li>
<li><a href="#_creación_de_columnas_calculadas_con_dax">5.2. Creación de columnas calculadas con DAX</a></li>
<li><a href="#_creación_de_medidas_y_columnas_calculadas_para_el_caso_de_estudio">5.3. Creación de medidas y columnas calculadas para el caso de estudio</a></li>
</ul>
</li>
<li><a href="#_creación_de_visualizaciones">6. Creación de visualizaciones</a></li>
<li><a href="#_otra_situación_habitual_de_transformación_de_datos_modelado_en_columnas">7. Otra situación habitual de transformación de datos. Modelado en columnas</a>
<ul class="sectlevel2">
<li><a href="#_descripción_de_la_fuente_de_datos">7.1. Descripción de la fuente de datos</a></li>
<li><a href="#_solución_al_problema_de_modelado_en_columnas">7.2. Solución al problema de modelado en columnas</a></li>
<li><a href="#_creación_de_visualizaciones_con_los_datos_transformados">7.3. Creación de visualizaciones con los datos transformados</a></li>
</ul>
</li>
<li><a href="#_conclusiones">8. Conclusiones</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="../../../images/di.png" alt="di">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resumen">Resumen</h2>
<div class="sectionbody">
<div class="paragraph">
<p>En este tutorial se describe cómo realizar transformaciones básicas de datos con Power BI. Power BI es una herramienta de análisis de datos que permite conectar a diferentes fuentes de datos, transformar los datos y visualizarlos. Power BI cuenta con una herramienta llamada Power Query que permite realizar transformaciones de datos de forma sencilla. En este tutorial se describe cómo realizar transformaciones básicas de datos con Power Query. En particular se describirán transformaciones sobre columnas (eliminación, cambios de nombre, transformaciones básicas sobre el contenido y transformación de modelos a lo ancho a modelos a lo largo), creación de medidas y columnas calculadas y creación de relaciones entre tablas.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introducción">1. Introducción</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Uno de los procesos más comunes en el análisis de datos es la transformación de los mismos. En este tutorial vamos a ver cómo realizar transformaciones básicas de datos con Power BI. Power BI es una herramienta de análisis de datos que permite conectar a diferentes fuentes de datos, transformar los datos y visualizarlos. Power BI cuenta con una herramienta llamada Power Query que permite realizar transformaciones de datos de forma sencilla. En este tutorial vamos a ver cómo realizar transformaciones básicas de datos con Power Query. Para ello, vamos a utilizar como fuente de datos una API de datos abiertos de ejemplo de una plataforma de comercio electrónico con datos ficticios (<a href="https://fakestoreapi.com/">Fake Store API</a>).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_caso_de_estudio_creación_de_un_cuadro_de_mandos_para_fake_store_api">2. Caso de estudio. Creación de un cuadro de mandos para Fake Store API</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://fakestoreapi.com/">Fake Store API</a> es una API de datos abiertos de ejemplo de una plataforma de comercio electrónico con datos ficticios. Esta API proporciona datos de productos, usuarios y pedidos. En este tutorial vamos a crear un informe con Power BI que permita analizar los datos de productos, clientes y sus valoraciones. Para ello, previamente habrá que realizar una serie de transformaciones de los datos, crear un modelo de datos, para finalizar creando un informe con visualizaciones que permitan analizar los datos.</p>
</div>
<div class="sect2">
<h3 id="_descripción_de_la_api">2.1. Descripción de la API</h3>
<div class="paragraph">
<p>La API de Fake Store proporciona una serie de endpoints que permiten obtener datos de productos, usuarios y pedidos. Permite obtener tanto listas de productos, usuarios y pedidos como obtener un producto, usuario o pedido por su id. En este tutorial nos centraremos únicamente en los endpoints que recuperan las listas completas de productos, usuarios y pedidos. Los endpoints que vamos a utilizar son los siguientes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/products</code>: Devuelve una lista de productos.</p>
</li>
<li>
<p><code>/users</code>: Devuelve una lista de usuarios.</p>
</li>
<li>
<p><code>/carts</code>: Devuelve una lista de pedidos (realmente, sesiones de compra).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Los endpoints devuelven los datos en formato JSON. A continuación se muestra un ejemplo de los datos que devuelve cada endpoint.</p>
</div>
<div class="sect3">
<h4 id="_endpoint_products">2.1.1. Endpoint <code>/products</code></h4>
<div class="paragraph">
<p>El endpoint <code>/products</code> devuelve una lista de productos. Cada producto tiene un identificador, un título, un precio, una descripción, una categoría, una imagen y una valoración. La valoración es un objeto que contiene la puntuación media y el número de valoraciones.  A continuación se muestra un ejemplo de los datos que devuelve el endpoint <code>/products</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">[
    {
        "id": 1,
        "title": "Fjallraven - Foldsack No. 1 Backpack, Fits 15 Laptops",
        "price": 109.95,
        "description": "Your perfect pack for everyday use and walks in the forest. Stash your laptop (up to 15 inches) in the padded sleeve, your everyday",
        "category": "men's clothing",
        "image": "https://fakestoreapi.com/img/81fPKd-2AYL._AC_SL1500_.jpg",
        "rating": {
            "rate": 3.9,
            "count": 120
        }
    },
    {
        "id": 2,
        "title": "Mens Casual Premium Slim Fit T-Shirts ",
        "price": 22.3,
        "description": "Slim-fitting style, contrast raglan long sleeve, three-button henley placket, light weight &amp; soft fabric for breathable and comfortable wearing. And Solid stitched shirts with round neck made for durability and a great fit for casual fashion wear and diehard baseball fans. The Henley style round neckline includes a three-button placket.",
        "category": "men's clothing",
        "image": "https://fakestoreapi.com/img/71-3HjGNDUL._AC_SY879._SX._UX._SY._UY_.jpg",
        "rating": {
            "rate": 4.1,
            "count": 259
        }
    },
    ...
]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_endpoint_users">2.1.2. Endpoint <code>/users</code></h4>
<div class="paragraph">
<p>El endpoint <code>/users</code> devuelve una lista de usuarios. Cada usuario tiene un identificador, un nombre, un email, un username, una dirección y un teléfono. La dirección es un objeto que contiene la calle, el número, la ciudad, el código postal y la geolocalización. El nombre es un objeto que contiene el nombre y los apellidos.</p>
</div>
<div class="paragraph">
<p>A continuación se muestra un ejemplo de los datos que devuelve el endpoint <code>/users</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">[
    {
        "address": {
            "geolocation": {
                "lat": "-37.3159",
                "long": "81.1496"
            },
            "city": "kilcoole",
            "street": "new road",
            "number": 7682,
            "zipcode": "12926-3874"
        },
        "id": 1,
        "email": "john@gmail.com",
        "username": "johnd",
        "password": "m38rmF$",
        "name": {
            "firstname": "john",
            "lastname": "doe"
        },
        "phone": "1-570-236-7033",
        "__v": 0
    },
    ...
]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_endpoint_carts">2.1.3. Endpoint <code>/carts</code></h4>
<div class="paragraph">
<p>El endpoint <code>/carts</code> devuelve una lista de pedidos, o mejor dicho, sesiones de compra. Cada pedido tiene un identificador, un usuario, una fecha y una lista de productos. El usuario se corresponde con el identificador del usuario que ha realizado el pedido. La lista de productos es una lista de objetos que contiene el identificador del producto y la cantidad de unidades compradas. A continuación se muestra un ejemplo de los datos que devuelve el endpoint <code>/carts</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">[
    {
        "id": 1,
        "userId": 1,
        "date": "2020-03-02T00:00:00.000Z",
        "products": [
            {
                "productId": 1,
                "quantity": 4
            },
            {
                "productId": 2,
                "quantity": 1
            },
            {
                "productId": 3,
                "quantity": 6
            }
        ],
        "__v": 0
    },
    {
        "id": 2,
        "userId": 1,
        "date": "2020-01-02T00:00:00.000Z",
        "products": [
            {
                "productId": 2,
                "quantity": 4
            },
            {
                "productId": 1,
                "quantity": 10
            },
            {
                "productId": 5,
                "quantity": 2
            }
        ],
        "__v": 0
    },
    ...
]</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_extracción_de_datos_y_transformación_con_power_query">3. Extracción de datos y transformación con Power Query</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Para extraer los datos de la API de Fake Store y realizar las transformaciones necesarias vamos a utilizar Power BI. Una de las fuentes de datos que pueden usarse en Power BI es una API REST. Para ello, vamos a utilizar la funcionalidad de Power BI que permite conectarse a una API REST y extraer los datos. Además, Power BI cuenta con una herramienta llamada Power Query que permite realizar transformaciones de datos de forma sencilla.</p>
</div>
<div class="sect2">
<h3 id="_conexión_a_la_api_de_fake_store">3.1. Conexión a la API de Fake Store</h3>
<div class="paragraph">
<p>Para conectarnos a la API de Fake Store y extraer los datos vamos a seguir los siguientes pasos:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>En el menú <code>Inicio</code> de Power BI, seleccionar <code>Obtener datos</code> y después <code>Web</code>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>La categoría <code>Web</code> permite conectarse a una URL y extraer los datos de la página web. Si no está disponible la categoría <code>Web</code>, se selecciona <code>Más</code>. Aparece un cuadro de diálogo en el que se selecciona la categoría <code>Otras</code> y seleccionar <code>Web</code>. El cuadro de diálogo muestra la gran cantidad de fuentes de datos a las que se puede conectar Power BI.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../images/power-query-web.png" alt="power query web">
</div>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>En el cuadro de diálogo <code>De web</code>, introducir la URL de la API de Fake Store para la recuperación de productos <code><a href="https://fakestoreapi.com/products" class="bare">https://fakestoreapi.com/products</a></code>. Seleccionar <code>Aceptar</code>.</p>
<div class="imageblock">
<div class="content">
<img src="../../../images/power-query-web-url-products.png" alt="power query web url products">
</div>
</div>
</li>
<li>
<p>Aparece una vista previa de los datos que se pueden extraer. Esta ventana es Power Query. Seleccionar <code>Cerrar y aplicar</code>. Esto importa los datos en Power BI creando una tabla con los datos de los productos. La tabla está disponible en el panel <code>Vista de datos</code> y en la <code>Vista de modelo</code>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>En el proceso de la importación de datos se podría haber realizado alguna transformación de los datos en la ventana de Power Query. En este caso, no se ha realizado ninguna transformación. Las realizaremos todas juntas más adelante.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Repetir los pasos 1 a 3 para los endpoints <code>/users</code> y <code>/carts</code>. Las URLs de los endpoints son las siguientes:</p>
<div class="ulist">
<ul>
<li>
<p><code>/users</code>: <code><a href="https://fakestoreapi.com/users" class="bare">https://fakestoreapi.com/users</a></code></p>
</li>
<li>
<p><code>/carts</code>: <code><a href="https://fakestoreapi.com/carts" class="bare">https://fakestoreapi.com/carts</a></code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Tras realizar estos pasos, se habrán importado los datos de los productos, usuarios y pedidos en Power BI. La figura siguiente ilustra las tablas importadas en Power BI disponibles en el panel <code>Vista de modelo</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../images/powerbi-model-base.png" alt="powerbi model base">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_transformación_de_los_datos">3.2. Transformación de los datos</h3>
<div class="paragraph">
<p>Una vez importados los datos en Power BI, vamos a realizar una serie de transformaciones para preparar los datos para el análisis. Las transformaciones que vamos a realizar son las siguientes:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Modificar la tabla de productos eliminando las columnas de imagen y descripción.</p>
</li>
<li>
<p>Modificar la tabla de pedidos para eliminar la versión y cambiar los nombres de las columnas <code>products.productId</code> y <code>products.quantity</code> por <code>productId</code> y <code>quantity</code> respectivamente.</p>
</li>
<li>
<p>Modificar la tabla de usuarios eliminando las columnas de geolocalización, calle, número, zip, email, username, password, teléfono y versión. Además, cambiar el nombre de la columna <code>name.firstname</code> por <code>firstname</code>, la columna <code>name.lastname</code> por <code>lastname</code> y transformaremos las columnas de <code>firstname</code> y <code>lastname</code> para que muestren los datos en formato <em>camel case</em>.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_modificar_la_tabla_de_productos">3.2.1. Modificar la tabla de productos</h4>
<div class="paragraph">
<p>Para modificar la tabla de productos y eliminar las columnas de imagen y descripción vamos a seguir los siguientes pasos:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Abrir Power Query haciendo clic en el botón <code>Transformar datos</code>. Aparecerá Power Query con las tres tablas importadas. La figura siguiente muestra Power Query con las tablas y mostrando el contenido de la tabla de productos.</p>
<div class="imageblock">
<div class="content">
<img src="../../../images/power-query-products-base.png" alt="power query products base">
</div>
</div>
</li>
<li>
<p>Seleccionar las columnas <code>image</code> y <code>description</code> haciendo clic en el nombre de la columna y después en <code>Quitar columnas</code>. Se añadirá un nuevo paso en el panel de <code>Pasos aplicados</code> que indica que se han eliminado las columnas.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Si se ha realizado un paso incorrecto en Power Query, se puede deshacer el paso eliminándolo del panel de <code>Pasos aplicados</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Seleccionar <code>Cerrar y aplicar</code> para aplicar los cambios y volver a Power BI.</p>
</li>
<li>
<p>Comprobar que la tabla de productos ha quedado como se necesitaba mostrándola en la <code>Vista de datos</code>.</p>
<div class="imageblock">
<div class="content">
<img src="../../../images/powerbi-model-products.png" alt="powerbi model products">
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_modificar_la_tabla_de_pedidos">3.2.2. Modificar la tabla de pedidos</h4>
<div class="paragraph">
<p>Para modificar la tabla de pedidos y eliminar la versión y cambiar los nombres de las columnas <code>products.productId</code> y <code>products.quantity</code> por <code>productId</code> y <code>quantity</code> respectivamente vamos a seguir los siguientes pasos:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Abrir Power Query haciendo clic en el botón <code>Transformar datos</code>.</p>
</li>
<li>
<p>Seleccionar la tabla de pedidos haciendo clic en la tabla. Aparecerá el contenido de la tabla en Power Query. La figura siguiente muestra Power Query con las tablas y mostrando el contenido de la tabla de pedidos.</p>
<div class="imageblock">
<div class="content">
<img src="../../../images/power-query-carts-base.png" alt="power query carts base">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>De forma predeterminada, cuando Power Query se encuentra con un campo que es un objeto, si es un objeto sencillo con un número de campos fijo, Power BI crea una columna para cada campo del objeto añadiéndole el nombre del campo padre como prefijo. En este caso, como el objeto JSON del endpoint tiene un campo <code>products</code> que es un objeto con dos campos <code>productId</code> y <code>quantity</code>, Power BI ha creado dos columnas para estos campos con los nombres <code>products.productId</code> y <code>products.quantity</code>. Si el objeto es una lista de objetos, Power BI crea una fila por cada objeto de la lista.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Seleccionar la columna <code>v</code> haciendo clic en el nombre de la columna y después en <code>Quitar columnas</code>. Se añadirá un nuevo paso en el panel de <code>Pasos aplicados</code> que indica que se ha eliminado la columna <code>v</code>.</p>
</li>
<li>
<p>Hacer clic con el botón derecho sobre la columna <code>products.productid</code> y seleccionar <code>Cambiar nombre</code>. Cambiar el nombre de la columna a <code>productId</code>. Repetir el proceso para la columna <code>products.quantity</code> cambiando el nombre a <code>quantity</code>. Se añadirán dos nuevos pasos en el panel de <code>Pasos aplicados</code> que indican que se han cambiado los nombres de las columnas.</p>
</li>
<li>
<p>Seleccionar <code>Cerrar y aplicar</code> para aplicar los cambios y volver a Power BI.</p>
</li>
<li>
<p>Comprobar que la tabla de pedidos ha quedado como se necesitaba mostrándola en la <code>Vista de datos</code>.</p>
<div class="imageblock">
<div class="content">
<img src="../../../images/powerbi-model-carts.png" alt="powerbi model carts">
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_modificar_la_tabla_de_usuarios">3.2.3. Modificar la tabla de usuarios</h4>
<div class="paragraph">
<p>Para modificar la tabla de usuarios y eliminar las columnas de geolocalización, calle, número, zip, email, username, password, teléfono y versión, cambiar el nombre de la columna <code>name.firstname</code> por <code>firstname</code>, la columna <code>name.lastname</code> por <code>lastname</code> y transformar las columnas de <code>firstname</code> y <code>lastname</code> para que muestren los datos en formato <em>camel case</em> vamos a seguir los siguientes pasos:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Abrir Power Query haciendo clic en el botón <code>Transformar datos</code>.</p>
</li>
<li>
<p>Seleccionar la tabla de usuarios haciendo clic en la tabla. Aparecerá el contenido de la tabla en Power Query. La figura siguiente muestra Power Query con las tablas y mostrando el contenido de la tabla de usuarios.</p>
<div class="imageblock">
<div class="content">
<img src="../../../images/power-query-users-base.png" alt="power query users base">
</div>
</div>
</li>
<li>
<p>Seleccionar las columnas <code>address.geolocation</code>, <code>address.street</code>, <code>address.number</code>, <code>address.zipcode</code>, <code>email</code>, <code>username</code>, <code>password</code>, <code>phone</code> y <code>__v</code> haciendo clic en el nombre de la columna y después en <code>Quitar columnas</code>. Se añadirá un nuevo paso en el panel de <code>Pasos aplicados</code> que indica que se han eliminado las columnas.</p>
</li>
<li>
<p>Hacer clic con el botón derecho sobre la columna <code>name.firstname</code> y seleccionar <code>Cambiar nombre</code>. Cambiar el nombre de la columna a <code>firstname</code>. Repetir el proceso para la columna <code>name.lastname</code> cambiando el nombre a <code>lastname</code>. Se añadirán dos nuevos pasos en el panel de <code>Pasos aplicados</code> que indican que se han cambiado los nombres de las columnas.</p>
</li>
<li>
<p>Hacer clic con el botón derecho sobre la columna <code>firstname</code> y seleccionar <code>Transformar</code> y después <code>Poner En Mayúsculas Cada Palabra</code>. Se añadirá un nuevo paso en el panel de <code>Pasos aplicados</code> que indica que se ha cambiado el tipo de la columna a texto.</p>
</li>
<li>
<p>Repetir el paso 5 para la columna <code>lastname</code>.</p>
</li>
<li>
<p>Seleccionar <code>Cerrar y aplicar</code> para aplicar los cambios y volver a Power BI.</p>
</li>
<li>
<p>Comprobar que la tabla de usuarios ha quedado como se necesitaba mostrándola en la <code>Vista de datos</code>.</p>
<div class="imageblock">
<div class="content">
<img src="../../../images/powerbi-model-users.png" alt="powerbi model users">
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creación_del_modelo_de_datos">4. Creación del modelo de datos</h2>
<div class="sectionbody">
<div class="paragraph">
<p>El modelo de datos es una representación de los datos que se va a utilizar para crear visualizaciones. En el modelo de datos se definen las relaciones entre las tablas y se crean columnas calculadas. En este caso, existe una relación 1:M entre las tablas de usuarios y pedidos, y otra relación 1:M entre las tablas de productos y pedidos. Para crear las relaciones basta con arrastrar la columna de la tabla que actúa como 1 a la columna de la tabla que actúa como M. Power BI detectará automáticamente la relación y la creará. Al crear la relación aparecerá un cuadro de diálogo en el que se puede seleccionar la cardinalidad de relación (1:M, M:1, M:M) y la dirección de filtro cruzado. Para crear las relaciones vamos a seguir los siguientes pasos:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>En Power BI, seleccionar la pestaña <code>Vista de modelo</code>.</p>
</li>
<li>
<p>Situar la tabla <code>Carts</code> entre las tablas <code>Products</code> y <code>Users</code>.</p>
</li>
<li>
<p>Arrastrar la columna <code>id</code> de la tabla <code>Users</code> a la columna <code>userId</code> de la tabla <code>Carts</code>. Power BI detectará automáticamente la relación y la creará. Aparecerá un cuadro de diálogo en el que se puede seleccionar la cardinalidad de relación y la dirección de filtro cruzado. Mantener <code>1:M</code> como cardinalidad de relación y <code>Ambas</code> como dirección de filtro cruzado.</p>
<div class="sidebarblock">
<div class="content">
<div class="title">Dirección de filtro cruzado</div>
<div class="paragraph">
<p>La dirección de filtro cruzado indica si la relación se puede filtrar en ambas direcciones. Por ejemplo, si se tiene una relación entre la tabla de usuarios y la tabla de pedidos, se puede filtrar la tabla de pedidos por un usuario y la tabla de usuarios por un pedido. Si se selecciona <code>Unico</code> como dirección de filtro cruzado se podrá filtrar la tabla de pedidos por un usuario, pero no se podrá filtrar la tabla de usuarios por un pedido. En cambio, si se elecciona <code>Ambas</code> como dirección de filtro cruzado se podrá filtrar en las dos direcciones.</p>
</div>
</div>
</div>
</li>
<li>
<p>Repetir el paso 3 para la tabla <code>Products</code> y la tabla <code>Carts</code> arrastrando la columna <code>id</code> de la tabla <code>Products</code> a la columna <code>productId</code> de la tabla <code>Carts</code>. Al igual que en la relación anterior, la relación tiene cardindalidad 1:M y la dirección de filtro cruzado es <code>Ambas</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>La figura siguiente muestra el modelo de datos con las relaciones creadas.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../images/powerbi-model-relations.png" alt="powerbi model relations">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_uso_de_dax_para_la_creación_de_medidas_y_columnas_calculadas">5. Uso de DAX para la creación de medidas y columnas calculadas</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Una de las operaciones habituales en los procesos de integración y transformación de datos es la creación de medidas y columnas calculadas. Power BI permite crear medidas y columnas calculadas utilizando el lenguaje DAX (Data Analysis Expressions). Las medidas calculadas son aquellas que se calculan en función de los datos de la tabla y se utilizan para realizar cálculos agregados. Por tanto, las medidas calculadas se utilizan para realizar cálculos a nivel de tabla. Por otro lado, las columnas calculadas son nuevas columnas cuyos valores se calculan en función de los datos de la tabla y se utilizan para realizar cálculos a nivel de fila.</p>
</div>
<div class="sect2">
<h3 id="_creación_de_medidas_calculadas_con_dax">5.1. Creación de medidas calculadas con DAX</h3>
<div class="paragraph">
<p>DAX es un lenguaje de fórmulas que se utiliza para crear medidas y columnas calculadas de forma sencilla. Las medidas calculadas se crean en función de los datos de la tabla y se utilizan para realizar cálculos agregados. Entre las principales funciones de DAX se encuentran las funciones de agregación, las funciones de filtrado y las funciones de tiempo. A continuación se muestra un ejemplo de una medida calculada que calcula el número de unidades de productos vendidos a partir de la tabla de pedidos.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-dax" data-lang="dax">ProductsSold = SUM('Carts'[quantity])</code></pre>
</div>
</div>
<div class="paragraph">
<p>Podemos agrupar las funciones útiles para crear medidas calculadas en las siguientes categorías:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Funciones de agregación: <code>SUM</code>, <code>AVERAGE</code>, <code>MIN</code>, <code>MAX</code>, <code>COUNT</code>, <code>COUNTA</code>, <code>COUNTBLANK</code>, <code>DISTINCTCOUNT</code>, <code>DISTINCTCOUNTNOBLANK</code>, <code>SUMX</code>, <code>AVERAGEX</code>, <code>MINX</code>, <code>MAXX</code>, <code>COUNTX</code>, <code>COUNTAX</code>, <code>COUNTAXA</code>, <code>DISTINCTCOUNTX</code>, <code>DISTINCTCOUNTNOBLANKX</code>. Por ejemplo, la función <code>SUM</code> se utiliza para sumar los valores de una columna. La función <code>COUNTA</code> se utiliza para contar los valores no vacíos de una columna. La función <code>DISTINCTCOUNT</code> se utiliza para contar los valores distintos de una columna.</p>
</li>
<li>
<p>Funciones de filtrado: <code>FILTER</code>, <code>ALL</code>, <code>ALLEXCEPT</code>, <code>ALLSELECTED</code>, <code>CALCULATE</code>, <code>CALCULATETABLE</code>, <code>KEEPFILTERS</code>, <code>REMOVEFILTERS</code>. Por ejemplo, la función <code>FILTER</code> se utiliza para filtrar una tabla en función de una condición. La función <code>ALL</code> se utiliza para eliminar los filtros de una tabla. La función <code>CALCULATE</code> se utiliza para modificar el contexto de evaluación de una expresión.</p>
</li>
<li>
<p>Funciones de tiempo: <code>DATE</code>, <code>TIME</code>, <code>NOW</code>, <code>TODAY</code>, <code>YEAR</code>, <code>MONTH</code>, <code>DAY</code>, <code>HOUR</code>, <code>MINUTE</code>, <code>SECOND</code>, <code>WEEKDAY</code>, <code>WEEKNUM</code>, <code>QUARTER</code>, <code>YEARFRAC</code>, <code>DATEDIFF</code>, <code>DATEADD</code>, <code>DATESBETWEEN</code>, <code>DATESINPERIOD</code>, <code>DATESMTD</code>, <code>DATESQTD</code>, <code>DATESYTD</code>, <code>PREVIOUSDAY</code>, <code>PREVIOUSMONTH</code>, <code>PREVIOUSQUARTER</code>, <code>PREVIOUSYEAR</code>, <code>NEXTDAY</code>, <code>NEXTMONTH</code>, <code>NEXTQUARTER</code>, <code>NEXTYEAR</code>. Por ejemplo, la función <code>YEAR</code> se utiliza para obtener el año de una fecha. La función <code>MONTH</code> se utiliza para obtener el mes de una fecha. La función <code>DAY</code> se utiliza para obtener el día de una fecha.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_creación_de_columnas_calculadas_con_dax">5.2. Creación de columnas calculadas con DAX</h3>
<div class="paragraph">
<p>Las columnas calculadas son nuevas columnas cuyos valores se calculan en función de los datos de la tabla y se utilizan para realizar cálculos a nivel de fila. DAX ofrece una serie de funciones que permiten realizar cálculos de forma sencilla. Entre las principales funciones de DAX se encuentran las funciones de texto, las funciones de fecha y hora, las funciones de lógica y las funciones de matemáticas. A continuación se muestra un ejemplo de una columna calculada que calcula el precio total de un producto vendido a partir de la tabla de pedidos.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-dax" data-lang="dax">TotalPrice = 'Carts'[quantity] * RELATED('Products'[price])</code></pre>
</div>
</div>
<div class="paragraph">
<p>Podemos agrupar las funciones útiles para crear columnas calculadas en las siguientes categorías:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Funciones de texto: <code>CONCATENATE</code>, <code>LEFT</code>, <code>RIGHT</code>, <code>MID</code>, <code>LEN</code>, <code>LOWER</code>, <code>UPPER</code>, <code>PROPER</code>, <code>TRIM</code>, <code>SUBSTITUTE</code>, <code>REPLACE</code>, <code>FIND</code>, <code>SEARCH</code>, <code>EXACT</code>, <code>TEXT</code>, <code>VALUE</code>, <code>FORMAT</code>. Por ejemplo, la función <code>CONCATENATE</code> se utiliza para concatenar dos o más cadenas de texto. La función <code>LEFT</code> se utiliza para obtener los primeros caracteres de una cadena de texto. La función <code>RIGHT</code> se utiliza para obtener los últimos caracteres de una cadena de texto.</p>
</li>
<li>
<p>Funciones de fecha y hora: <code>DATE</code>, <code>TIME</code>, <code>NOW</code>, <code>TODAY</code>, <code>YEAR</code>, <code>MONTH</code>, <code>DAY</code>, <code>HOUR</code>, <code>MINUTE</code>, <code>SECOND</code>, <code>WEEKDAY</code>, <code>WEEKNUM</code>, <code>QUARTER</code>, <code>YEARFRAC</code>, <code>DATEDIFF</code>, <code>DATEADD</code>, <code>DATESBETWEEN</code>, <code>DATESINPERIOD</code>, <code>DATESMTD</code>, <code>DATESQTD</code>, <code>DATESYTD</code>, <code>PREVIOUSDAY</code>, <code>PREVIOUSMONTH</code>, <code>PREVIOUSQUARTER</code>, <code>PREVIOUSYEAR</code>, <code>NEXTDAY</code>, <code>NEXTMONTH</code>, <code>NEXTQUARTER</code>, <code>NEXTYEAR</code>. Por ejemplo, la función <code>YEAR</code> se utiliza para obtener el año de una fecha. La función <code>MONTH</code> se utiliza para obtener el mes de una fecha. La función <code>DAY</code> se utiliza para obtener el día de una fecha.</p>
</li>
<li>
<p>Funciones de lógica: <code>IF</code>, <code>AND</code>, <code>OR</code>, <code>NOT</code>, <code>TRUE</code>, <code>FALSE</code>, <code>SWITCH</code>, <code>IFERROR</code>, <code>IFNA</code>, <code>ISEVEN</code>, <code>ISODD</code>, <code>ISBLANK</code>, <code>ISERROR</code>, <code>ISLOGICAL</code>, <code>ISNONTEXT</code>, <code>ISNUMBER</code>, <code>ISTEXT</code>. Por ejemplo, la función <code>IF</code> se utiliza para evaluar una condición y devolver un valor si la condición es verdadera y otro valor si la condición es falsa. La función <code>AND</code> se utiliza para evaluar si todas las condiciones son verdaderas. La función <code>OR</code> se utiliza para evaluar si alguna de las condiciones es verdadera.</p>
</li>
<li>
<p>Funciones de matemáticas: <code>SUM</code>, <code>AVERAGE</code>, <code>MIN</code>, <code>MAX</code>, <code>COUNT</code>, <code>COUNTA</code>, <code>COUNTBLANK</code>, <code>DISTINCTCOUNT</code>, <code>DISTINCTCOUNTNOBLANK</code>, <code>SUMX</code>, <code>AVERAGEX</code>, <code>MINX</code>, <code>MAXX</code>, <code>COUNTX</code>, <code>COUNTAX</code>, <code>COUNTAXA</code>, <code>DISTINCTCOUNTX</code>, <code>DISTINCTCOUNTNOBLANKX</code>. Por ejemplo, la función <code>SUM</code> se utiliza para sumar los valores de columnas de una fila. La función <code>AVERAGE</code> se utiliza para calcular la media de valores de columnas de una fila. La función <code>MIN</code> se utiliza para calcular el valor mínimo de valores de columnas de una fila. La función <code>MAX</code> se utiliza para calcular el valor máximo de valores de columnas de una fila.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Obsérvese que DAX tiene funciones que pueden ser utilizadas tanto para crear medidas como para crear columnas calculadas. Por ejemplo, la función <code>SUM</code> se puede utilizar para sumar los valores de una columna y crear una medida calculada o para sumar los valores de columnas de una fila y crear una columna calculada.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Funciones de tablas: <code>FILTER</code>, <code>ALL</code>, <code>ALLEXCEPT</code>, <code>ALLSELECTED</code>, <code>CALCULATE</code>, <code>CALCULATETABLE</code>, <code>KEEPFILTERS</code>, <code>REMOVEFILTERS</code>. Por ejemplo, la función <code>FILTER</code> se utiliza para filtrar una tabla en función de una condición. La función <code>ALL</code> se utiliza para eliminar los filtros de una tabla. La función <code>ALL</code> se utiliza para eliminar los filtros de una tabla. La función <code>CALCULATE</code> se utiliza para modificar el contexto de evaluación de una expresión.</p>
</li>
<li>
<p>Funciones de relación: <code>RELATED</code>, <code>RELATEDTABLE</code>, <code>LOOKUPVALUE</code>. La función <code>RELATED</code> se utiliza para obtener el valor de una columna relacionada. La función <code>LOOKUPVALUE</code> se utiliza para buscar un valor en una tabla relacionada.</p>
</li>
<li>
<p>Funciones de manejo de errores: <code>IFERROR</code>, <code>IFNA</code>, <code>ISERROR</code>, <code>ISERR</code>, <code>ISNA</code>, <code>ERROR</code>, <code>ERROR.TYPE</code>. Por ejemplo, la función <code>IFERROR</code> se utiliza para devolver un valor si se produce un error. La función <code>IFNA</code> se utiliza para devolver un valor si se produce un error <code>#N/A</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_creación_de_medidas_y_columnas_calculadas_para_el_caso_de_estudio">5.3. Creación de medidas y columnas calculadas para el caso de estudio</h3>
<div class="paragraph">
<p>Para el caso de estudio de la API de Fake Store vamos a crear las siguientes medidas y columnas calculadas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Tabla <code>Carts</code>:</p>
<div class="ulist">
<ul>
<li>
<p>Medida calculada: <code>TotalUsersWithCarts</code>: Cuenta el número de usuarios con pedidos.</p>
</li>
<li>
<p>Columna calculada: <code>amount</code>: Calcula el importe total de cada línea de un pedido.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Tabla <code>Products</code>:</p>
<div class="ulist">
<ul>
<li>
<p>Medida calculada <code>TotalProducts</code>: Cuenta el número total de productos.</p>
</li>
<li>
<p>Medida calculada <code>TotalSales</code>: Total de ventas de los productos.</p>
</li>
<li>
<p>Medida calculada <code>MaxRating</code>: Calcula la máxima valoración de los productos.</p>
</li>
<li>
<p>Medida calculada <code>MinRating</code>: Calcula la mínima valoración de los productos.</p>
</li>
<li>
<p>Medida calculada <code>AvgRating</code>: Calcula la media de las valoraciones de los productos.</p>
</li>
<li>
<p>Medida calculada <code>TotalRating</code>: Calcula el total de valoraciones de los productos.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Para crear las medidas y columnas calculadas vamos a seguir los siguientes pasos:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>En Power BI, seleccionar la pestaña <code>Vista de modelo</code>.</p>
</li>
<li>
<p>Seleccionar la tabla <code>Carts</code>.</p>
</li>
<li>
<p>Hacer clic en el botón <code>Nueva medida</code> en la barra de herramientas o hacer clic con el botón derecho en la tabla <code>Carts</code> y crear la medida desde el menú contextual. La medida se creará en la barra de fórmulas en la parte superior. Esta sería la fórmula de la medida calculada usando la función <a href="https://learn.microsoft.com/es-es/dax/countrows-function-dax"><code>COUNTROWS</code></a>:</p>
<div class="ulist">
<ul>
<li>
<p><code>TotalUsersWithCarts = COUNTROWS('carts')</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Hacer clic en el botón <code>Nueva columna</code> en la barra de herramientas o hacer clic con el botón derecho en la tabla <code>Carts</code> y crear la columna desde el menú contextual. La columna se creará en la barra de fórmulas en la parte superior. Esta sería la fórmula de la columna calculada usando la función <a href="https://learn.microsoft.com/es-es/dax/related-function-dax"><code>RELATED</code></a>:</p>
<div class="ulist">
<ul>
<li>
<p><code>amount = 'carts'[quantity] * RELATED('products'[price])</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Seleccionar la tabla <code>Products</code>.</p>
</li>
<li>
<p>Hacer clic en el botón <code>Nueva medida</code> en la barra de herramientas o hacer clic con el botón derecho en la tabla <code>Products</code> y crear la medida desde el menú contextual. La medida se creará en la barra de fórmulas en la parte superior. Estas serían las fórmulas de las medidas calculadas usando las funciones <a href="https://learn.microsoft.com/es-es/dax/sum-function-dax"><code>SUM</code></a>, <a href="https://learn.microsoft.com/es-es/dax/average-function-dax"><code>AVERAGE</code></a>, <a href="https://learn.microsoft.com/es-es/dax/max-function-dax"><code>MAX</code></a> y <a href="https://learn.microsoft.com/es-es/dax/min-function-dax"><code>MIN</code></a>.</p>
<div class="ulist">
<ul>
<li>
<p><code>TotalProducts = COUNTROWS('products')</code></p>
</li>
<li>
<p><code>TotalSales = SUM('carts'[amount])</code></p>
</li>
<li>
<p><code>MaxRating = MAX('products'[rating.rate])</code></p>
</li>
<li>
<p><code>MinRating = MIN('products'[rating.rate])</code></p>
</li>
<li>
<p><code>AvgRating = AVERAGE('products'[rating.rate])</code></p>
</li>
<li>
<p><code>TotalRating = SUM('products'[rating.count])</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>La figura siguiente muestra el modelo con las medidas y columnas calculadas creadas en Power BI.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../images/powerbi-model-calculated.png" alt="powerbi model calculated">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creación_de_visualizaciones">6. Creación de visualizaciones</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Una vez que se han creado las medidas y columnas calculadas, se pueden utilizar para crear visualizaciones. Como vimos en el <a href="../01-PowerBI/index.html">tutorial de Visualización de datos con Power BI</a>, Power BI ofrece una gran variedad de visualizaciones que permiten representar los datos de forma gráfica. Entre las visualizaciones más comunes se encuentran las tablas, los gráficos de barras, los gráficos de líneas, los gráficos de áreas, los gráficos de sectores, los gráficos de dispersión y los mapas. La figura siguiente ilustra el informe que crearemos para el caso de estudio de la API de Fake Store. En la figura se puede ver la distribución de las visualizaciones en el informe.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../images/powerbi-fake-store-report.png" alt="powerbi fake store report">
</div>
</div>
<div class="paragraph">
<p>A continuación se muestran las visualizaciones que crearemos para el caso de estudio de la API de Fake Store:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Tarjetas: Tarjetas sin etiqueta de categoría, título centrado, fondo y borde celeste, borde redondeado. Como títulos utilizaríamos <code>Productos</code>, <code>Ventas</code>, <code>Valoración máxima</code>, <code>Valoración mínima</code>, <code>Valoración media</code> y <code>Valoraciones</code>. Crearemos una tarjeta inicial para la primera medida calculada <code>TotalProducts</code> y después duplicaremos la tarjeta para el resto de medidas calculadas.</p>
</li>
<li>
<p>Segmentador de datos: Segmentador de valoración para el campo <code>rating.rate</code> de la tabla <code>Products</code> para crear el segmentador. Cambiar el título a <code>Valoración</code> y dejar el estilo a <code>Entre</code> en la pestaña <code>Objeto visual</code> del menú <code>Dar formato a objeto visual</code> para que se pueda seleccionar un rango de valoraciones.</p>
</li>
<li>
<p>Gráfico de anillos: Gráfico de anillos para mostrar el total de productos por categoría. Seleccionar el campo <code>category</code> de la tabla <code>Products</code> para el valor de <code>Leyenda</code> y la medida calculada <code>TotalProducts</code> para el valor de <code>Valores</code>. Cambiar el título a <code>Productos por categoría</code>.</p>
</li>
<li>
<p>Gráficos de barras: Gráficos de barras para valoración media por categoría y para total de valoraciones por categoría.</p>
<div class="ulist">
<ul>
<li>
<p>Valoración media por categoría: Seleccionar el campo <code>category</code> de la tabla <code>Products</code> para el valor de <code>Eje Y</code> y la medida calculada <code>AvgRating</code> para el valor de <code>Eje X</code>. Cambiar el título a <code>Valoración media por categoría</code>.</p>
</li>
<li>
<p>Total de valoraciones por categoría: Seleccionar el campo <code>category</code> de la tabla <code>Products</code> para el valor de <code>Eje Y</code> y la medida calculada <code>TotalRatings</code> para el valor de <code>Eje X</code>. Cambiar el título a <code>Valoraciones por categoría</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Gráfico de mapa para compradores por ciudad. Seleccionar el campo <code>city</code> de la tabla <code>Users</code> para el valor de <code>Ubicación</code> y la medida calculada <code>TotalUsersWithCarts</code> para el valor de <code>Tamaño de la burbuja</code>. Cambiar el título a <code>Compradores por ciudad</code>.</p>
</li>
<li>
<p>Gráfico de líneas para evolución de las ventas. Seleccionar el campo <code>date</code> de la tabla <code>Carts</code>  para el valor de <code>Eje X</code> (seleccionar sólo el mes) y la medida calculada <code>TotalSales</code> para el valor de <code>Eje Y</code>. Cambiar el título a <code>Ventas por mes</code>.</p>
</li>
<li>
<p>Gráfico de barras para compradores por categoría. Seleccionar el campo <code>category</code> de la tabla <code>Products</code> para el valor de <code>Eje X</code> y la medida calculada <code>TotalUsersWithCarts</code> para el valor de <code>Eje Y</code>. Cambiar el título a <code>Compradores por categoría</code>.</p>
</li>
<li>
<p>Tablas de datos: Una tabla de ventas por producto y otra de usuarios.</p>
<div class="ulist">
<ul>
<li>
<p>Tabla de ventas por producto: De la tabla <code>carts</code> seleccionar los campos <code>title</code>, <code>quantity</code> y <code>amount</code> dos veces (una para mostrar el importe de ventas y otra para mostar ese importe en forma de porcentaje). De la tabla <code>products</code> seleccionar los campos <code>AvgRating</code> y <code>TotalRating</code>. Cambiar los títulos a <code>Producto</code>, <code>Unidades</code>, <code>Ventas</code>, <code>%Ventas</code>, <code>Valoración</code> y <code>Valoraciones</code>.</p>
</li>
<li>
<p>Tabla de usuarios: De la tabla <code>users</code> seleccionar los campos <code>id</code>, <code>firstname</code>, <code>lastname</code> y <code>city</code> y <code>phone</code>. Cambiar los títulos a <code>id</code>, <code>Nombre</code>, <code>Apellidos</code> y <code>Ciudad</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Crear un cuadro de texto con el título del informe (p.e. <code>Productos - Análisis de ventas y valoraciones. Fake Store</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Una vez creadas estas visualizaciones obtendremos el informe que aparece en la figura anterior.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_otra_situación_habitual_de_transformación_de_datos_modelado_en_columnas">7. Otra situación habitual de transformación de datos. Modelado en columnas</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Hasta ahora hemos visto un caso de estudio de transformación de datos con Power BI. Como es de esperar, existen gran cantidad de situaciones que se pueden presentar, pero hay una a que vamos a prestar especial atención en este tutorial, y es el caso de la solución al problema del modelado en columnas. Para ilustrar estos casos, usaremos una fuente de datos de ejemplo que contiene datos que presentan este problema. Se trata de un dataset en formato CSV de <a href="https://github.com/MolatoSekgobela/Data-Science-Video-games-sales-dataset" target="_blank" rel="noopener">datos de ventas de videojuegos</a>.</p>
</div>
<div class="sect2">
<h3 id="_descripción_de_la_fuente_de_datos">7.1. Descripción de la fuente de datos</h3>
<div class="paragraph">
<p>Tal y como aparece en la documentación de la fuente de datos del ejemplo, el dataset contiene información sobre las ventas de videojuegos en diferentes regiones del mundo. La figura siguiente ilustra una muestra de los datos del dataset.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../images/powerbi-videojuegos-datos.png" alt="powerbi videojuegos datos">
</div>
</div>
<div class="paragraph">
<p>Como se puede observar en la figura, cada fila contiene información sobre un juego y cada columna contiene información sobre el juego. A modo de resumen, las columnas de la tabla representan propiedades de los juegos como el nombre, la plataforma, el año de lanzamiento, el género, la editorial y las ventas en diferentes regiones del mundo. En este caso, las columnas <code>NA_Sales</code>, <code>EU_Sales</code>, <code>JP_Sales</code>, <code>Other_Sales</code> y <code>Global_Sales</code> contienen información sobre las ventas en diferentes regiones del mundo. Este tipo de datos se conoce como datos en formato ancho. Para poder realizar un análisis de los datos, es necesario transformar los datos en formato ancho a formato largo. En este caso, se trata de un problema de modelado en columnas.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Modelado en formato ancho y en formato largo</div>
<div class="paragraph">
<p>En el modelado en formato ancho (o modelado en columnas), cada columna contiene información sobre una variable y cada fila contiene información sobre una observación. En el modelado en formato largo, cada columna contiene información sobre una variable y cada fila contiene información sobre una observación.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_solución_al_problema_de_modelado_en_columnas">7.2. Solución al problema de modelado en columnas</h3>
<div class="paragraph">
<p>Para solucionar el problema de modelado en columnas vamos a seguir los siguientes pasos:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>En Power BI, seleccionar la pestaña <code>Inicio</code>.</p>
</li>
<li>
<p>Seleccionar <code>Obtener datos</code> y después <code>CSV</code>.</p>
</li>
<li>
<p>Seleccionar el archivo CSV con los datos de ventas de videojuegos.</p>
</li>
<li>
<p>En el cuadro de diálogo <code>Importar datos</code>, seleccionar <code>Cargar</code>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>En el proceso de carga de importación de datos, Power BI ofrece la posibilidad de realizar transformaciones en los datos sobre la marcha en el proceso de importación. Esto nos llevaría directamene a Power Query para definir las transformaciones a realizar sobre los datos. Sin embargo, en este caso cargaremos primero los datos y posteriormente realizaremos las transformaciones necesarias con Power Query. No obstante, se podría haber optado por realizar la transformación con Power Query sobre la marcha en el proceso de importación de datos.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Una vez importados los datos, seleccionar la tabla de datos en la <code>Vista de tabla</code>.</p>
</li>
<li>
<p>Seleccionar la opción <code>Transformar datos</code> del menú <code>Inicio</code> para abrir Power Query.</p>
</li>
<li>
<p>En Power Query, seleccionar las columnas <code>NA_Sales</code>, <code>EU_Sales</code>, <code>JP_Sales</code> y <code>Other_Sales</code>.</p>
</li>
<li>
<p>Hacer clic con el botón derecho sobre las columnas seleccionadas y seleccionar <code>Anulación de dinamización de columnas</code>. Power Query eliminará las columnas seleccionadas, y creará una nueva columna con los valores de las ventas y otra columna con los nombres de las regiones.</p>
</li>
<li>
<p>Cambiar el nombre de las columnas creadas a <code>Region</code> y <code>Sales</code>.</p>
</li>
<li>
<p>Aprovecharemos y cambiaremos el nombre de las regiones a un formato más legible. Por ejemplo, cambiaremos <code>NA_Sales</code> por <code>North America</code>, <code>EU_Sales</code> por <code>European Union</code>, <code>JP_Sales</code> por <code>Japan</code> y <code>Other_Sales</code> por <code>Other</code>. La sustitución de valores está disponible en el menú <code>Transformar | Reemplazar valores</code>.</p>
</li>
<li>
<p>Eliminaremos la columna <code>Global_Sales</code> ya que no es necesaria.</p>
</li>
<li>
<p>Seleccionar <code>Cerrar y aplicar</code> para aplicar los cambios y volver a Power BI.</p>
</li>
<li>
<p>Comprobar que la tabla de datos ha quedado como se necesitaba mostrándola en la <code>Vista de tabla</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>La figura siguiente muestra la tabla de datos con las ventas de videojuegos en formato largo.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../images/powerbi-videojuegos-modelado.png" alt="powerbi videojuegos modelado">
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">El formato largo de los datos y la redundancia de datos</div>
<div class="paragraph">
<p>Al observar el resultado de la transformación a formato largo de los datos, podemos ver que aparece redundancia en las filas, ya que se repiten los datos de los juegos para cada región. Esto es una característica del formato largo de los datos, en el que cada fila contiene información sobre una observación. En este caso, cada observación es una venta de un juego en una región. Si se optata por un modelo sin redundancia, se podría dejar una tabla con los datos característicos de los juegos y otra tabla con las ventas en las diferentes regiones, que tendría una relación 1:M con la tabla de datos de los juegos. Sin embargo, en entornos de análisis de datos, y en particular en entornos de data warehousing, es común encontrar redundancia de datos en las tablas para facilitar el análisis de los datos. Como la carga de datos al data warehouse es realizada por procesos ETL que están programados para manejar la redundancia de datos, no es un problema en estos entornos y las consideraciones de normalización de bases de datos no son tan importantes como en entornos transaccionales u operacionales.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creación_de_visualizaciones_con_los_datos_transformados">7.3. Creación de visualizaciones con los datos transformados</h3>
<div class="paragraph">
<p>Una vez que se han transformado los datos de formato ancho a formato largo, se pueden utilizar los datos obtenidos para crear visualizaciones. La figura siguiente ilustra un ejemplo de informe que podríamos crear para el caso de estudio de la fuente de datos de ventas de videojuegos. En la figura se puede ver la distribución de las visualizaciones en el informe.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../images/powerbi-videojuegos-report.png" alt="powerbi videojuegos report">
</div>
</div>
<div class="paragraph">
<p>Para crear este informe se pueden utilizar las siguientes visualizaciones:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Tarjeta con total de ventas: Usar el campo <code>Sales</code> para el valor de la tarjeta.</p>
</li>
<li>
<p>Gráfico de anillo con total de ventas por región: Usar el campo <code>Region</code> para el valor de <code>Leyenda</code> y el campo <code>Sales</code> para el valor de <code>Valores</code>. Cambiar la posición de la leyenda a <code>Arriba, en el centro</code> en la pestaña <code>Objeto visual</code> del menú <code>Dar formato a objeto visual</code>.</p>
</li>
<li>
<p>Gráfico de barras apiladas con total de ventas por plataforma: Usar el campo <code>Platform</code> para el valor de <code>Eje Y</code> y el campo <code>Sales</code> para el valor de <code>Eje X</code>. Mostrar las etiquetas de datos en la parte exterior de las barras en la pestaña <code>Objeto visual</code> del menú <code>Dar formato a objeto visual</code>.</p>
</li>
<li>
<p>Gráfico de barras apiladas de ventas por género: Copiar el gráfico anterior y cambiar el campo <code>Platform</code> por el campo <code>Genre</code>.</p>
</li>
<li>
<p>Tabla de datos con las columnas de nombre, año, género, plataforma y editorial.</p>
</li>
<li>
<p>Gráfico de columnas con ventas por año ordenado cronológicamente: Usar el campo <code>Year</code> para el valor de <code>Eje X</code> y el campo <code>Sales</code> para el valor de <code>Eje Y</code>. Ordenar el eje X de forma cronológica haciendo clic sobre la visualización en los puntos suspensivos y seleccionar <code>Ordenar eje | Year | Ascendente</code>.</p>
</li>
<li>
<p>Crear segmentador de datos para filtrar las ventas por región: Usar el campo <code>Region</code> para el segmentador de datos. Cambiar el estulo a <code>Mosaico</code> en la pestaña <code>Objeto visual</code> del menú <code>Dar formato a objeto visual</code> dentro de la opción de <code>Configuración de la segmentación</code>.</p>
</li>
<li>
<p>Crear segmentadores de lista desplegable para filtrar las ventas por plataforma, género, editorial y año: Usar los campos <code>Platform</code>, <code>Genre</code>, <code>Publisher</code> y <code>Year</code> para los segmentadores de lista. Cambiar el estilo a <code>Menú desplegable</code> en la pestaña <code>Objeto visual</code> del menú <code>Dar formato a objeto visual</code> dentro de la opción de <code>Configuración de la segmentación</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Una vez creadas estas visualizaciones obtendremos el informe que aparece en la figura anterior.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusiones">8. Conclusiones</h2>
<div class="sectionbody">
<div class="paragraph">
<p>En este tutorial hemos visto cómo realizar la integración y transformación de datos con Power BI. Hemos visto cómo importar datos de una API REST y de un archivo CSV, cómo realizar transformaciones de los datos con Power Query y cómo crear un modelo de datos con Power BI. Además, hemos visto cómo utilizar DAX para crear medidas y columnas calculadas y cómo crear visualizaciones con los datos transformados. Hemos visto un caso de estudio de la API de Fake Store y otro caso de estudio de datos de ventas de videojuegos. Power BI es una herramienta muy potente que permite realizar análisis de datos de forma sencilla y visual. Con Power BI se pueden realizar análisis de datos, crear informes y compartirlos con otras personas.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2024-09-19 20:29:23 +0200
</div>
</div>
</body>
</html>